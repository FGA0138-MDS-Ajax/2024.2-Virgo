import MaterialCommunityIcons from '@expo/vector-icons/MaterialCommunityIcons';
import { CameraView, useCameraPermissions } from 'expo-camera';
import * as ImagePicker from 'expo-image-picker';
import { useEffect, useRef, useState } from 'react';
import { Dimensions, Alert, Image, StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import Svg, { Path } from 'react-native-svg';
import axios from 'axios'

export default function CameraScreen() {
  const { width, height } = Dimensions.get('window');
  const [permission, requestPermission] = useCameraPermissions();
  const [cameraProps, setCameraProps] = useState({ facing: 'back' });
  const [image, setImage] = useState(null); // Armazena a imagem capturada ou selecionada

  const cameraRef = useRef(null);

  const Template = () => (
    <Svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} fill="none" xmlns="http://www.w3.org/2000/svg">
      <Path fillRule="evenodd" clipRule="evenodd" d={`M${width} 0H0V${height}H${width}V0ZM${width * 0.84} ${height * 0.26}H${width * 0.16}V${height * 0.64}H${width * 0.84}V${height * 0.26}Z`} fill="black" fillOpacity="0.5"/>
      <Path d={`M${width * 0.16} ${height * 0.26}H${width * 0.84}V${height * 0.64}H${width * 0.16}V${height * 0.26}Z`} stroke="#FFEE00" strokeWidth="3" strokeLinecap="round" strokeLinejoin="bevel" strokeDasharray="35 35"/>
      <Path d="M77.1854 588.757L73.9994 598H72.0731L76.0868 587.336H77.3173L77.1854 588.757ZM79.8515 598L76.6581 588.757L76.5189 587.336H77.7567L81.7851 598H79.8515ZM79.6977 594.045V595.502H73.8969V594.045H79.6977ZM84.6687 591.599V601.047H82.9036V590.075H84.5296L84.6687 591.599ZM89.8323 593.964V594.118C89.8323 594.694 89.764 595.229 89.6272 595.722C89.4954 596.21 89.2977 596.638 89.034 597.004C88.7752 597.365 88.4554 597.646 88.0745 597.846C87.6937 598.046 87.2542 598.146 86.7562 598.146C86.263 598.146 85.8309 598.056 85.4598 597.875C85.0936 597.69 84.7835 597.429 84.5296 597.092C84.2757 596.755 84.0706 596.359 83.9144 595.905C83.763 595.446 83.6556 594.943 83.5921 594.396V593.803C83.6556 593.222 83.763 592.695 83.9144 592.221C84.0706 591.748 84.2757 591.34 84.5296 590.998C84.7835 590.656 85.0936 590.393 85.4598 590.207C85.826 590.021 86.2532 589.929 86.7415 589.929C87.2395 589.929 87.6814 590.026 88.0672 590.222C88.4529 590.412 88.7776 590.686 89.0413 591.042C89.305 591.394 89.5027 591.818 89.6346 592.316C89.7664 592.81 89.8323 593.359 89.8323 593.964ZM88.0672 594.118V593.964C88.0672 593.598 88.033 593.259 87.9646 592.946C87.8963 592.629 87.7889 592.351 87.6424 592.111C87.4959 591.872 87.3079 591.687 87.0784 591.555C86.8538 591.418 86.5828 591.35 86.2654 591.35C85.9529 591.35 85.6844 591.403 85.4598 591.511C85.2352 591.613 85.0472 591.757 84.8958 591.943C84.7444 592.128 84.6272 592.346 84.5442 592.595C84.4612 592.839 84.4026 593.105 84.3685 593.393V594.814C84.427 595.166 84.5271 595.488 84.6687 595.781C84.8104 596.074 85.0105 596.308 85.2693 596.484C85.533 596.655 85.8699 596.74 86.2801 596.74C86.5975 596.74 86.8685 596.672 87.0931 596.535C87.3177 596.398 87.5008 596.21 87.6424 595.971C87.7889 595.727 87.8963 595.446 87.9646 595.129C88.033 594.812 88.0672 594.475 88.0672 594.118ZM93.3312 591.584V598H91.5661V590.075H93.2507L93.3312 591.584ZM95.7556 590.024L95.7409 591.665C95.6335 591.645 95.5163 591.63 95.3894 591.621C95.2673 591.611 95.1452 591.606 95.0231 591.606C94.7204 591.606 94.4543 591.65 94.2248 591.738C93.9953 591.821 93.8024 591.943 93.6462 592.104C93.4948 592.26 93.3776 592.451 93.2946 592.675C93.2116 592.9 93.1628 593.151 93.1481 593.43L92.7453 593.459C92.7453 592.961 92.7941 592.5 92.8918 592.075C92.9895 591.65 93.1359 591.276 93.3312 590.954C93.5314 590.632 93.7805 590.38 94.0783 590.2C94.3811 590.019 94.7302 589.929 95.1257 589.929C95.2331 589.929 95.3479 589.938 95.4699 589.958C95.5969 589.978 95.6921 590 95.7556 590.024ZM96.5592 594.125V593.957C96.5592 593.386 96.6422 592.856 96.8082 592.368C96.9742 591.875 97.2135 591.447 97.526 591.086C97.8434 590.72 98.2291 590.437 98.6832 590.236C99.1422 590.031 99.6598 589.929 100.236 589.929C100.817 589.929 101.335 590.031 101.789 590.236C102.248 590.437 102.636 590.72 102.953 591.086C103.271 591.447 103.512 591.875 103.678 592.368C103.844 592.856 103.927 593.386 103.927 593.957V594.125C103.927 594.697 103.844 595.227 103.678 595.715C103.512 596.203 103.271 596.63 102.953 596.997C102.636 597.358 102.25 597.641 101.796 597.846C101.342 598.046 100.827 598.146 100.251 598.146C99.6695 598.146 99.1495 598.046 98.6905 597.846C98.2364 597.641 97.8507 597.358 97.5333 596.997C97.2159 596.63 96.9742 596.203 96.8082 595.715C96.6422 595.227 96.5592 594.697 96.5592 594.125ZM98.3243 593.957V594.125C98.3243 594.482 98.3609 594.819 98.4342 595.136C98.5074 595.454 98.6222 595.732 98.7784 595.971C98.9347 596.21 99.1349 596.398 99.379 596.535C99.6231 596.672 99.9137 596.74 100.251 596.74C100.578 596.74 100.861 596.672 101.1 596.535C101.344 596.398 101.545 596.21 101.701 595.971C101.857 595.732 101.972 595.454 102.045 595.136C102.123 594.819 102.162 594.482 102.162 594.125V593.957C102.162 593.605 102.123 593.273 102.045 592.961C101.972 592.644 101.855 592.363 101.693 592.119C101.537 591.875 101.337 591.684 101.093 591.547C100.854 591.406 100.568 591.335 100.236 591.335C99.9039 591.335 99.6158 591.406 99.3717 591.547C99.1324 591.684 98.9347 591.875 98.7784 592.119C98.6222 592.363 98.5074 592.644 98.4342 592.961C98.3609 593.273 98.3243 593.605 98.3243 593.957ZM106.818 590.075L108.327 592.705L109.865 590.075H111.806L109.404 593.964L111.901 598H109.96L108.349 595.261L106.738 598H104.79L107.28 593.964L104.885 590.075H106.818ZM115.129 590.075V598H113.357V590.075H115.129ZM113.24 587.995C113.24 587.727 113.328 587.504 113.503 587.329C113.684 587.148 113.933 587.058 114.25 587.058C114.563 587.058 114.809 587.148 114.99 587.329C115.171 587.504 115.261 587.727 115.261 587.995C115.261 588.259 115.171 588.479 114.99 588.654C114.809 588.83 114.563 588.918 114.25 588.918C113.933 588.918 113.684 588.83 113.503 588.654C113.328 588.479 113.24 588.259 113.24 587.995ZM119.053 591.687V598H117.288V590.075H118.95L119.053 591.687ZM118.767 593.745L118.167 593.737C118.167 593.19 118.235 592.685 118.372 592.221C118.509 591.757 118.709 591.354 118.972 591.013C119.236 590.666 119.563 590.4 119.954 590.214C120.349 590.024 120.806 589.929 121.324 589.929C121.685 589.929 122.014 589.982 122.312 590.09C122.615 590.192 122.876 590.356 123.096 590.581C123.321 590.805 123.492 591.093 123.609 591.445C123.731 591.796 123.792 592.221 123.792 592.719V598H122.027V592.873C122.027 592.487 121.968 592.185 121.851 591.965C121.739 591.745 121.575 591.589 121.36 591.496C121.15 591.398 120.899 591.35 120.606 591.35C120.274 591.35 119.991 591.413 119.756 591.54C119.527 591.667 119.339 591.84 119.192 592.06C119.046 592.28 118.938 592.534 118.87 592.822C118.802 593.11 118.767 593.417 118.767 593.745ZM123.682 593.276L122.854 593.459C122.854 592.98 122.92 592.529 123.052 592.104C123.189 591.674 123.387 591.298 123.645 590.976C123.909 590.649 124.234 590.393 124.619 590.207C125.005 590.021 125.447 589.929 125.945 589.929C126.35 589.929 126.712 589.985 127.029 590.097C127.351 590.205 127.625 590.375 127.849 590.61C128.074 590.844 128.245 591.149 128.362 591.525C128.479 591.896 128.538 592.346 128.538 592.873V598H126.765V592.866C126.765 592.465 126.707 592.155 126.59 591.936C126.477 591.716 126.316 591.564 126.106 591.481C125.896 591.394 125.645 591.35 125.352 591.35C125.078 591.35 124.837 591.401 124.627 591.503C124.422 591.601 124.248 591.74 124.107 591.921C123.965 592.097 123.858 592.299 123.784 592.529C123.716 592.758 123.682 593.007 123.682 593.276ZM134.073 598.146C133.487 598.146 132.957 598.051 132.484 597.861C132.015 597.666 131.614 597.395 131.282 597.048C130.955 596.701 130.704 596.293 130.528 595.825C130.352 595.356 130.264 594.851 130.264 594.309V594.016C130.264 593.396 130.355 592.834 130.535 592.331C130.716 591.828 130.967 591.398 131.29 591.042C131.612 590.681 131.993 590.405 132.432 590.214C132.872 590.024 133.348 589.929 133.861 589.929C134.427 589.929 134.923 590.024 135.347 590.214C135.772 590.405 136.124 590.673 136.402 591.02C136.685 591.362 136.895 591.77 137.032 592.243C137.174 592.717 137.244 593.239 137.244 593.811V594.565H131.121V593.298H135.501V593.159C135.491 592.841 135.428 592.543 135.311 592.265C135.198 591.987 135.025 591.762 134.791 591.591C134.556 591.42 134.244 591.335 133.853 591.335C133.56 591.335 133.299 591.398 133.07 591.525C132.845 591.647 132.657 591.826 132.506 592.06C132.354 592.294 132.237 592.578 132.154 592.91C132.076 593.237 132.037 593.605 132.037 594.016V594.309C132.037 594.655 132.083 594.978 132.176 595.275C132.274 595.568 132.415 595.825 132.601 596.044C132.786 596.264 133.011 596.438 133.275 596.564C133.538 596.687 133.839 596.748 134.175 596.748C134.6 596.748 134.979 596.662 135.311 596.491C135.643 596.32 135.931 596.079 136.175 595.766L137.105 596.667C136.934 596.916 136.712 597.155 136.439 597.385C136.165 597.609 135.831 597.792 135.435 597.934C135.045 598.076 134.591 598.146 134.073 598.146ZM147.274 596.411V592.631C147.274 592.348 147.223 592.104 147.121 591.899C147.018 591.694 146.862 591.535 146.652 591.423C146.447 591.311 146.188 591.254 145.875 591.254C145.587 591.254 145.338 591.303 145.128 591.401C144.918 591.499 144.755 591.63 144.638 591.796C144.521 591.962 144.462 592.15 144.462 592.36H142.704C142.704 592.048 142.78 591.745 142.931 591.452C143.083 591.159 143.302 590.898 143.59 590.668C143.878 590.439 144.223 590.258 144.623 590.126C145.023 589.995 145.473 589.929 145.971 589.929C146.566 589.929 147.094 590.029 147.553 590.229C148.017 590.429 148.38 590.732 148.644 591.137C148.913 591.538 149.047 592.041 149.047 592.646V596.169C149.047 596.53 149.071 596.855 149.12 597.143C149.174 597.426 149.25 597.673 149.347 597.883V598H147.538C147.455 597.81 147.389 597.568 147.34 597.275C147.296 596.977 147.274 596.689 147.274 596.411ZM147.531 593.181L147.545 594.272H146.278C145.951 594.272 145.663 594.304 145.414 594.367C145.165 594.426 144.958 594.514 144.792 594.631C144.625 594.748 144.501 594.89 144.418 595.056C144.335 595.222 144.293 595.41 144.293 595.62C144.293 595.83 144.342 596.022 144.44 596.198C144.538 596.369 144.679 596.503 144.865 596.601C145.055 596.699 145.285 596.748 145.553 596.748C145.915 596.748 146.229 596.674 146.498 596.528C146.771 596.376 146.986 596.193 147.143 595.979C147.299 595.759 147.382 595.551 147.392 595.356L147.963 596.14C147.904 596.34 147.804 596.555 147.663 596.784C147.521 597.014 147.335 597.233 147.106 597.443C146.881 597.648 146.61 597.817 146.293 597.949C145.98 598.081 145.619 598.146 145.209 598.146C144.691 598.146 144.23 598.044 143.825 597.839C143.419 597.629 143.102 597.348 142.873 596.997C142.643 596.64 142.528 596.237 142.528 595.788C142.528 595.368 142.606 594.997 142.763 594.675C142.924 594.348 143.158 594.074 143.466 593.854C143.778 593.635 144.159 593.469 144.608 593.356C145.058 593.239 145.57 593.181 146.146 593.181H147.531ZM156.85 591.599V601.047H155.085V590.075H156.711L156.85 591.599ZM162.014 593.964V594.118C162.014 594.694 161.946 595.229 161.809 595.722C161.677 596.21 161.479 596.638 161.216 597.004C160.957 597.365 160.637 597.646 160.256 597.846C159.875 598.046 159.436 598.146 158.938 598.146C158.445 598.146 158.012 598.056 157.641 597.875C157.275 597.69 156.965 597.429 156.711 597.092C156.457 596.755 156.252 596.359 156.096 595.905C155.945 595.446 155.837 594.943 155.774 594.396V593.803C155.837 593.222 155.945 592.695 156.096 592.221C156.252 591.748 156.457 591.34 156.711 590.998C156.965 590.656 157.275 590.393 157.641 590.207C158.008 590.021 158.435 589.929 158.923 589.929C159.421 589.929 159.863 590.026 160.249 590.222C160.635 590.412 160.959 590.686 161.223 591.042C161.487 591.394 161.684 591.818 161.816 592.316C161.948 592.81 162.014 593.359 162.014 593.964ZM160.249 594.118V593.964C160.249 593.598 160.215 593.259 160.146 592.946C160.078 592.629 159.971 592.351 159.824 592.111C159.678 591.872 159.49 591.687 159.26 591.555C159.035 591.418 158.764 591.35 158.447 591.35C158.135 591.35 157.866 591.403 157.641 591.511C157.417 591.613 157.229 591.757 157.077 591.943C156.926 592.128 156.809 592.346 156.726 592.595C156.643 592.839 156.584 593.105 156.55 593.393V594.814C156.609 595.166 156.709 595.488 156.85 595.781C156.992 596.074 157.192 596.308 157.451 596.484C157.715 596.655 158.052 596.74 158.462 596.74C158.779 596.74 159.05 596.672 159.275 596.535C159.499 596.398 159.682 596.21 159.824 595.971C159.971 595.727 160.078 595.446 160.146 595.129C160.215 594.812 160.249 594.475 160.249 594.118ZM165.63 586.75V598H163.858V586.75H165.63ZM172.256 596.411V592.631C172.256 592.348 172.205 592.104 172.103 591.899C172 591.694 171.844 591.535 171.634 591.423C171.429 591.311 171.17 591.254 170.858 591.254C170.569 591.254 170.32 591.303 170.11 591.401C169.9 591.499 169.737 591.63 169.62 591.796C169.503 591.962 169.444 592.15 169.444 592.36H167.686C167.686 592.048 167.762 591.745 167.913 591.452C168.065 591.159 168.284 590.898 168.572 590.668C168.86 590.439 169.205 590.258 169.605 590.126C170.005 589.995 170.455 589.929 170.953 589.929C171.548 589.929 172.076 590.029 172.535 590.229C172.999 590.429 173.362 590.732 173.626 591.137C173.895 591.538 174.029 592.041 174.029 592.646V596.169C174.029 596.53 174.053 596.855 174.102 597.143C174.156 597.426 174.232 597.673 174.329 597.883V598H172.52C172.437 597.81 172.371 597.568 172.322 597.275C172.278 596.977 172.256 596.689 172.256 596.411ZM172.513 593.181L172.527 594.272H171.26C170.933 594.272 170.645 594.304 170.396 594.367C170.147 594.426 169.94 594.514 169.774 594.631C169.608 594.748 169.483 594.89 169.4 595.056C169.317 595.222 169.275 595.41 169.275 595.62C169.275 595.83 169.324 596.022 169.422 596.198C169.52 596.369 169.661 596.503 169.847 596.601C170.037 596.699 170.267 596.748 170.535 596.748C170.897 596.748 171.212 596.674 171.48 596.528C171.754 596.376 171.968 596.193 172.125 595.979C172.281 595.759 172.364 595.551 172.374 595.356L172.945 596.14C172.886 596.34 172.786 596.555 172.645 596.784C172.503 597.014 172.317 597.233 172.088 597.443C171.863 597.648 171.592 597.817 171.275 597.949C170.963 598.081 170.601 598.146 170.191 598.146C169.673 598.146 169.212 598.044 168.807 597.839C168.401 597.629 168.084 597.348 167.855 596.997C167.625 596.64 167.51 596.237 167.51 595.788C167.51 595.368 167.588 594.997 167.745 594.675C167.906 594.348 168.14 594.074 168.448 593.854C168.76 593.635 169.141 593.469 169.59 593.356C170.04 593.239 170.552 593.181 171.129 593.181H172.513ZM177.85 591.767V598H176.085V590.075H177.748L177.85 591.767ZM177.535 593.745L176.964 593.737C176.969 593.176 177.047 592.661 177.198 592.192C177.354 591.723 177.569 591.32 177.843 590.983C178.121 590.646 178.453 590.388 178.839 590.207C179.225 590.021 179.654 589.929 180.128 589.929C180.509 589.929 180.853 589.982 181.161 590.09C181.473 590.192 181.739 590.361 181.959 590.595C182.184 590.83 182.354 591.135 182.472 591.511C182.589 591.882 182.647 592.338 182.647 592.88V598H180.875V592.873C180.875 592.492 180.819 592.192 180.707 591.972C180.599 591.748 180.44 591.589 180.23 591.496C180.025 591.398 179.769 591.35 179.461 591.35C179.159 591.35 178.888 591.413 178.648 591.54C178.409 591.667 178.207 591.84 178.041 592.06C177.879 592.28 177.755 592.534 177.667 592.822C177.579 593.11 177.535 593.417 177.535 593.745ZM188.307 590.075V591.364H183.839V590.075H188.307ZM185.128 588.134H186.893V595.81C186.893 596.054 186.928 596.242 186.996 596.374C187.069 596.501 187.169 596.586 187.296 596.63C187.423 596.674 187.572 596.696 187.743 596.696C187.865 596.696 187.982 596.689 188.095 596.674C188.207 596.66 188.297 596.645 188.366 596.63L188.373 597.978C188.226 598.022 188.056 598.061 187.86 598.095C187.67 598.129 187.45 598.146 187.201 598.146C186.796 598.146 186.437 598.076 186.124 597.934C185.812 597.788 185.568 597.551 185.392 597.224C185.216 596.896 185.128 596.462 185.128 595.92V588.134ZM194.362 596.411V592.631C194.362 592.348 194.311 592.104 194.208 591.899C194.106 591.694 193.95 591.535 193.74 591.423C193.534 591.311 193.276 591.254 192.963 591.254C192.675 591.254 192.426 591.303 192.216 591.401C192.006 591.499 191.843 591.63 191.725 591.796C191.608 591.962 191.55 592.15 191.55 592.36H189.792C189.792 592.048 189.867 591.745 190.019 591.452C190.17 591.159 190.39 590.898 190.678 590.668C190.966 590.439 191.31 590.258 191.711 590.126C192.111 589.995 192.56 589.929 193.058 589.929C193.654 589.929 194.181 590.029 194.64 590.229C195.104 590.429 195.468 590.732 195.732 591.137C196 591.538 196.135 592.041 196.135 592.646V596.169C196.135 596.53 196.159 596.855 196.208 597.143C196.262 597.426 196.337 597.673 196.435 597.883V598H194.626C194.543 597.81 194.477 597.568 194.428 597.275C194.384 596.977 194.362 596.689 194.362 596.411ZM194.618 593.181L194.633 594.272H193.366C193.039 594.272 192.751 594.304 192.502 594.367C192.253 594.426 192.045 594.514 191.879 594.631C191.713 594.748 191.589 594.89 191.506 595.056C191.423 595.222 191.381 595.41 191.381 595.62C191.381 595.83 191.43 596.022 191.528 596.198C191.625 596.369 191.767 596.503 191.952 596.601C192.143 596.699 192.372 596.748 192.641 596.748C193.002 596.748 193.317 596.674 193.586 596.528C193.859 596.376 194.074 596.193 194.23 595.979C194.387 595.759 194.47 595.551 194.479 595.356L195.051 596.14C194.992 596.34 194.892 596.555 194.75 596.784C194.609 597.014 194.423 597.233 194.194 597.443C193.969 597.648 193.698 597.817 193.381 597.949C193.068 598.081 192.707 598.146 192.297 598.146C191.779 598.146 191.318 598.044 190.912 597.839C190.507 597.629 190.19 597.348 189.96 596.997C189.731 596.64 189.616 596.237 189.616 595.788C189.616 595.368 189.694 594.997 189.85 594.675C190.012 594.348 190.246 594.074 190.554 593.854C190.866 593.635 191.247 593.469 191.696 593.356C192.145 593.239 192.658 593.181 193.234 593.181H194.618ZM205.403 596.74C205.691 596.74 205.95 596.684 206.179 596.572C206.414 596.455 206.602 596.293 206.743 596.088C206.89 595.883 206.97 595.646 206.985 595.378H208.648C208.638 595.891 208.486 596.357 208.193 596.777C207.9 597.197 207.512 597.531 207.029 597.78C206.546 598.024 206.011 598.146 205.425 598.146C204.819 598.146 204.292 598.044 203.843 597.839C203.394 597.629 203.02 597.341 202.722 596.975C202.424 596.608 202.2 596.186 202.048 595.708C201.902 595.229 201.829 594.716 201.829 594.169V593.913C201.829 593.366 201.902 592.854 202.048 592.375C202.2 591.892 202.424 591.467 202.722 591.101C203.02 590.734 203.394 590.449 203.843 590.244C204.292 590.034 204.817 589.929 205.418 589.929C206.052 589.929 206.609 590.056 207.087 590.31C207.566 590.559 207.942 590.908 208.215 591.357C208.494 591.801 208.638 592.319 208.648 592.91H206.985C206.97 592.617 206.897 592.353 206.765 592.119C206.638 591.879 206.458 591.689 206.223 591.547C205.994 591.406 205.718 591.335 205.396 591.335C205.039 591.335 204.744 591.408 204.509 591.555C204.275 591.696 204.092 591.892 203.96 592.141C203.828 592.385 203.733 592.661 203.674 592.968C203.621 593.271 203.594 593.586 203.594 593.913V594.169C203.594 594.497 203.621 594.814 203.674 595.122C203.728 595.429 203.821 595.705 203.953 595.949C204.089 596.188 204.275 596.381 204.509 596.528C204.744 596.669 205.042 596.74 205.403 596.74ZM209.891 594.125V593.957C209.891 593.386 209.974 592.856 210.14 592.368C210.306 591.875 210.545 591.447 210.857 591.086C211.175 590.72 211.561 590.437 212.015 590.236C212.474 590.031 212.991 589.929 213.567 589.929C214.148 589.929 214.666 590.031 215.12 590.236C215.579 590.437 215.967 590.72 216.285 591.086C216.602 591.447 216.844 591.875 217.01 592.368C217.176 592.856 217.259 593.386 217.259 593.957V594.125C217.259 594.697 217.176 595.227 217.01 595.715C216.844 596.203 216.602 596.63 216.285 596.997C215.967 597.358 215.582 597.641 215.127 597.846C214.673 598.046 214.158 598.146 213.582 598.146C213.001 598.146 212.481 598.046 212.022 597.846C211.568 597.641 211.182 597.358 210.865 596.997C210.547 596.63 210.306 596.203 210.14 595.715C209.974 595.227 209.891 594.697 209.891 594.125ZM211.656 593.957V594.125C211.656 594.482 211.692 594.819 211.766 595.136C211.839 595.454 211.954 595.732 212.11 595.971C212.266 596.21 212.466 596.398 212.71 596.535C212.955 596.672 213.245 596.74 213.582 596.74C213.909 596.74 214.192 596.672 214.432 596.535C214.676 596.398 214.876 596.21 215.032 595.971C215.188 595.732 215.303 595.454 215.376 595.136C215.455 594.819 215.494 594.482 215.494 594.125V593.957C215.494 593.605 215.455 593.273 215.376 592.961C215.303 592.644 215.186 592.363 215.025 592.119C214.869 591.875 214.668 591.684 214.424 591.547C214.185 591.406 213.899 591.335 213.567 591.335C213.235 591.335 212.947 591.406 212.703 591.547C212.464 591.684 212.266 591.875 212.11 592.119C211.954 592.363 211.839 592.644 211.766 592.961C211.692 593.273 211.656 593.605 211.656 593.957ZM220.728 591.687V598H218.963V590.075H220.626L220.728 591.687ZM220.443 593.745L219.842 593.737C219.842 593.19 219.911 592.685 220.047 592.221C220.184 591.757 220.384 591.354 220.648 591.013C220.912 590.666 221.239 590.4 221.629 590.214C222.025 590.024 222.481 589.929 222.999 589.929C223.36 589.929 223.69 589.982 223.988 590.09C224.29 590.192 224.552 590.356 224.771 590.581C224.996 590.805 225.167 591.093 225.284 591.445C225.406 591.796 225.467 592.221 225.467 592.719V598H223.702V592.873C223.702 592.487 223.643 592.185 223.526 591.965C223.414 591.745 223.25 591.589 223.036 591.496C222.826 591.398 222.574 591.35 222.281 591.35C221.949 591.35 221.666 591.413 221.432 591.54C221.202 591.667 221.014 591.84 220.868 592.06C220.721 592.28 220.614 592.534 220.545 592.822C220.477 593.11 220.443 593.417 220.443 593.745ZM225.357 593.276L224.53 593.459C224.53 592.98 224.596 592.529 224.727 592.104C224.864 591.674 225.062 591.298 225.321 590.976C225.584 590.649 225.909 590.393 226.295 590.207C226.681 590.021 227.122 589.929 227.621 589.929C228.026 589.929 228.387 589.985 228.704 590.097C229.027 590.205 229.3 590.375 229.525 590.61C229.749 590.844 229.92 591.149 230.038 591.525C230.155 591.896 230.213 592.346 230.213 592.873V598H228.441V592.866C228.441 592.465 228.382 592.155 228.265 591.936C228.153 591.716 227.992 591.564 227.782 591.481C227.572 591.394 227.32 591.35 227.027 591.35C226.754 591.35 226.512 591.401 226.302 591.503C226.097 591.601 225.924 591.74 225.782 591.921C225.641 592.097 225.533 592.299 225.46 592.529C225.392 592.758 225.357 593.007 225.357 593.276ZM240.683 596.411V592.631C240.683 592.348 240.632 592.104 240.529 591.899C240.426 591.694 240.27 591.535 240.06 591.423C239.855 591.311 239.596 591.254 239.284 591.254C238.996 591.254 238.747 591.303 238.537 591.401C238.327 591.499 238.163 591.63 238.046 591.796C237.929 591.962 237.87 592.15 237.87 592.36H236.112C236.112 592.048 236.188 591.745 236.34 591.452C236.491 591.159 236.711 590.898 236.999 590.668C237.287 590.439 237.631 590.258 238.031 590.126C238.432 589.995 238.881 589.929 239.379 589.929C239.975 589.929 240.502 590.029 240.961 590.229C241.425 590.429 241.789 590.732 242.052 591.137C242.321 591.538 242.455 592.041 242.455 592.646V596.169C242.455 596.53 242.48 596.855 242.529 597.143C242.582 597.426 242.658 597.673 242.756 597.883V598H240.946C240.863 597.81 240.798 597.568 240.749 597.275C240.705 596.977 240.683 596.689 240.683 596.411ZM240.939 593.181L240.954 594.272H239.687C239.36 594.272 239.071 594.304 238.822 594.367C238.573 594.426 238.366 594.514 238.2 594.631C238.034 594.748 237.909 594.89 237.826 595.056C237.743 595.222 237.702 595.41 237.702 595.62C237.702 595.83 237.751 596.022 237.848 596.198C237.946 596.369 238.088 596.503 238.273 596.601C238.464 596.699 238.693 596.748 238.962 596.748C239.323 596.748 239.638 596.674 239.906 596.528C240.18 596.376 240.395 596.193 240.551 595.979C240.707 595.759 240.79 595.551 240.8 595.356L241.371 596.14C241.313 596.34 241.213 596.555 241.071 596.784C240.929 597.014 240.744 597.233 240.514 597.443C240.29 597.648 240.019 597.817 239.701 597.949C239.389 598.081 239.028 598.146 238.617 598.146C238.1 598.146 237.638 598.044 237.233 597.839C236.828 597.629 236.51 597.348 236.281 596.997C236.051 596.64 235.937 596.237 235.937 595.788C235.937 595.368 236.015 594.997 236.171 594.675C236.332 594.348 236.567 594.074 236.874 593.854C237.187 593.635 237.568 593.469 238.017 593.356C238.466 593.239 238.979 593.181 239.555 593.181H240.939ZM253.32 596.359V586.75H255.093V598H253.489L253.32 596.359ZM248.164 594.125V593.972C248.164 593.371 248.235 592.824 248.376 592.331C248.518 591.833 248.723 591.406 248.992 591.049C249.26 590.688 249.587 590.412 249.973 590.222C250.359 590.026 250.793 589.929 251.277 589.929C251.755 589.929 252.175 590.021 252.537 590.207C252.898 590.393 253.206 590.659 253.459 591.005C253.713 591.347 253.916 591.757 254.067 592.236C254.219 592.709 254.326 593.237 254.39 593.818V594.309C254.326 594.875 254.219 595.393 254.067 595.861C253.916 596.33 253.713 596.735 253.459 597.077C253.206 597.419 252.896 597.683 252.529 597.868C252.168 598.054 251.746 598.146 251.262 598.146C250.784 598.146 250.352 598.046 249.966 597.846C249.585 597.646 249.26 597.365 248.992 597.004C248.723 596.643 248.518 596.218 248.376 595.729C248.235 595.236 248.164 594.702 248.164 594.125ZM249.929 593.972V594.125C249.929 594.487 249.961 594.824 250.024 595.136C250.093 595.449 250.198 595.725 250.339 595.964C250.481 596.198 250.664 596.384 250.889 596.521C251.118 596.652 251.392 596.718 251.709 596.718C252.109 596.718 252.439 596.63 252.698 596.455C252.957 596.279 253.159 596.042 253.306 595.744C253.457 595.441 253.56 595.104 253.613 594.733V593.408C253.584 593.12 253.523 592.851 253.43 592.602C253.342 592.353 253.223 592.136 253.071 591.95C252.92 591.76 252.732 591.613 252.507 591.511C252.288 591.403 252.026 591.35 251.724 591.35C251.401 591.35 251.128 591.418 250.903 591.555C250.679 591.691 250.493 591.879 250.347 592.119C250.205 592.358 250.1 592.636 250.032 592.954C249.963 593.271 249.929 593.61 249.929 593.972ZM256.827 594.125V593.957C256.827 593.386 256.91 592.856 257.076 592.368C257.242 591.875 257.481 591.447 257.793 591.086C258.111 590.72 258.496 590.437 258.951 590.236C259.41 590.031 259.927 589.929 260.503 589.929C261.084 589.929 261.602 590.031 262.056 590.236C262.515 590.437 262.903 590.72 263.221 591.086C263.538 591.447 263.78 591.875 263.946 592.368C264.112 592.856 264.195 593.386 264.195 593.957V594.125C264.195 594.697 264.112 595.227 263.946 595.715C263.78 596.203 263.538 596.63 263.221 596.997C262.903 597.358 262.517 597.641 262.063 597.846C261.609 598.046 261.094 598.146 260.518 598.146C259.937 598.146 259.417 598.046 258.958 597.846C258.504 597.641 258.118 597.358 257.801 596.997C257.483 596.63 257.242 596.203 257.076 595.715C256.91 595.227 256.827 594.697 256.827 594.125ZM258.592 593.957V594.125C258.592 594.482 258.628 594.819 258.702 595.136C258.775 595.454 258.89 595.732 259.046 595.971C259.202 596.21 259.402 596.398 259.646 596.535C259.891 596.672 260.181 596.74 260.518 596.74C260.845 596.74 261.128 596.672 261.368 596.535C261.612 596.398 261.812 596.21 261.968 595.971C262.124 595.732 262.239 595.454 262.312 595.136C262.391 594.819 262.43 594.482 262.43 594.125V593.957C262.43 593.605 262.391 593.273 262.312 592.961C262.239 592.644 262.122 592.363 261.961 592.119C261.805 591.875 261.604 591.684 261.36 591.547C261.121 591.406 260.835 591.335 260.503 591.335C260.171 591.335 259.883 591.406 259.639 591.547C259.4 591.684 259.202 591.875 259.046 592.119C258.89 592.363 258.775 592.644 258.702 592.961C258.628 593.273 258.592 593.605 258.592 593.957ZM269.393 598.146C268.807 598.146 268.277 598.051 267.804 597.861C267.335 597.666 266.934 597.395 266.602 597.048C266.275 596.701 266.024 596.293 265.848 595.825C265.672 595.356 265.584 594.851 265.584 594.309V594.016C265.584 593.396 265.675 592.834 265.855 592.331C266.036 591.828 266.287 591.398 266.61 591.042C266.932 590.681 267.313 590.405 267.752 590.214C268.192 590.024 268.668 589.929 269.18 589.929C269.747 589.929 270.242 590.024 270.667 590.214C271.092 590.405 271.444 590.673 271.722 591.02C272.005 591.362 272.215 591.77 272.352 592.243C272.493 592.717 272.564 593.239 272.564 593.811V594.565H266.441V593.298H270.821V593.159C270.811 592.841 270.748 592.543 270.631 592.265C270.518 591.987 270.345 591.762 270.111 591.591C269.876 591.42 269.564 591.335 269.173 591.335C268.88 591.335 268.619 591.398 268.389 591.525C268.165 591.647 267.977 591.826 267.826 592.06C267.674 592.294 267.557 592.578 267.474 592.91C267.396 593.237 267.357 593.605 267.357 594.016V594.309C267.357 594.655 267.403 594.978 267.496 595.275C267.594 595.568 267.735 595.825 267.921 596.044C268.106 596.264 268.331 596.438 268.595 596.564C268.858 596.687 269.159 596.748 269.495 596.748C269.92 596.748 270.299 596.662 270.631 596.491C270.963 596.32 271.251 596.079 271.495 595.766L272.425 596.667C272.254 596.916 272.032 597.155 271.759 597.385C271.485 597.609 271.151 597.792 270.755 597.934C270.365 598.076 269.91 598.146 269.393 598.146ZM275.917 591.767V598H274.152V590.075H275.814L275.917 591.767ZM275.602 593.745L275.03 593.737C275.035 593.176 275.113 592.661 275.265 592.192C275.421 591.723 275.636 591.32 275.909 590.983C276.188 590.646 276.52 590.388 276.905 590.207C277.291 590.021 277.721 589.929 278.195 589.929C278.575 589.929 278.92 589.982 279.227 590.09C279.54 590.192 279.806 590.361 280.026 590.595C280.25 590.83 280.421 591.135 280.538 591.511C280.655 591.882 280.714 592.338 280.714 592.88V598H278.942V592.873C278.942 592.492 278.885 592.192 278.773 591.972C278.666 591.748 278.507 591.589 278.297 591.496C278.092 591.398 277.836 591.35 277.528 591.35C277.225 591.35 276.954 591.413 276.715 591.54C276.476 591.667 276.273 591.84 276.107 592.06C275.946 592.28 275.821 592.534 275.734 592.822C275.646 593.11 275.602 593.417 275.602 593.745ZM285.978 596.74C286.266 596.74 286.525 596.684 286.754 596.572C286.989 596.455 287.177 596.293 287.318 596.088C287.465 595.883 287.546 595.646 287.56 595.378H289.223C289.213 595.891 289.062 596.357 288.769 596.777C288.476 597.197 288.087 597.531 287.604 597.78C287.121 598.024 286.586 598.146 286 598.146C285.395 598.146 284.867 598.044 284.418 597.839C283.969 597.629 283.595 597.341 283.297 596.975C283 596.608 282.775 596.186 282.624 595.708C282.477 595.229 282.404 594.716 282.404 594.169V593.913C282.404 593.366 282.477 592.854 282.624 592.375C282.775 591.892 283 591.467 283.297 591.101C283.595 590.734 283.969 590.449 284.418 590.244C284.867 590.034 285.392 589.929 285.993 589.929C286.628 589.929 287.184 590.056 287.663 590.31C288.141 590.559 288.517 590.908 288.791 591.357C289.069 591.801 289.213 592.319 289.223 592.91H287.56C287.546 592.617 287.472 592.353 287.34 592.119C287.213 591.879 287.033 591.689 286.798 591.547C286.569 591.406 286.293 591.335 285.971 591.335C285.614 591.335 285.319 591.408 285.085 591.555C284.85 591.696 284.667 591.892 284.535 592.141C284.403 592.385 284.308 592.661 284.25 592.968C284.196 593.271 284.169 593.586 284.169 593.913V594.169C284.169 594.497 284.196 594.814 284.25 595.122C284.303 595.429 284.396 595.705 284.528 595.949C284.665 596.188 284.85 596.381 285.085 596.528C285.319 596.669 285.617 596.74 285.978 596.74ZM285.202 598.015H286.513L286.425 598.425C286.703 598.474 286.957 598.591 287.187 598.776C287.421 598.967 287.538 599.272 287.538 599.692C287.538 599.941 287.487 600.166 287.384 600.366C287.282 600.566 287.128 600.737 286.923 600.878C286.723 601.025 286.471 601.137 286.169 601.215C285.871 601.293 285.524 601.333 285.129 601.333L285.077 600.336C285.268 600.336 285.439 600.312 285.59 600.263C285.741 600.219 285.861 600.148 285.949 600.051C286.042 599.953 286.088 599.826 286.088 599.67C286.088 599.519 286.049 599.401 285.971 599.318C285.893 599.235 285.771 599.172 285.605 599.128C285.443 599.084 285.233 599.052 284.975 599.033L285.202 598.015ZM295.271 596.411V592.631C295.271 592.348 295.219 592.104 295.117 591.899C295.014 591.694 294.858 591.535 294.648 591.423C294.443 591.311 294.184 591.254 293.872 591.254C293.583 591.254 293.334 591.303 293.125 591.401C292.915 591.499 292.751 591.63 292.634 591.796C292.517 591.962 292.458 592.15 292.458 592.36H290.7C290.7 592.048 290.776 591.745 290.927 591.452C291.079 591.159 291.298 590.898 291.586 590.668C291.875 590.439 292.219 590.258 292.619 590.126C293.02 589.995 293.469 589.929 293.967 589.929C294.562 589.929 295.09 590.029 295.549 590.229C296.013 590.429 296.376 590.732 296.64 591.137C296.909 591.538 297.043 592.041 297.043 592.646V596.169C297.043 596.53 297.067 596.855 297.116 597.143C297.17 597.426 297.246 597.673 297.343 597.883V598H295.534C295.451 597.81 295.385 597.568 295.336 597.275C295.292 596.977 295.271 596.689 295.271 596.411ZM295.527 593.181L295.542 594.272H294.274C293.947 594.272 293.659 594.304 293.41 594.367C293.161 594.426 292.954 594.514 292.788 594.631C292.622 594.748 292.497 594.89 292.414 595.056C292.331 595.222 292.29 595.41 292.29 595.62C292.29 595.83 292.338 596.022 292.436 596.198C292.534 596.369 292.675 596.503 292.861 596.601C293.051 596.699 293.281 596.748 293.549 596.748C293.911 596.748 294.226 596.674 294.494 596.528C294.768 596.376 294.982 596.193 295.139 595.979C295.295 595.759 295.378 595.551 295.388 595.356L295.959 596.14C295.9 596.34 295.8 596.555 295.659 596.784C295.517 597.014 295.332 597.233 295.102 597.443C294.877 597.648 294.606 597.817 294.289 597.949C293.977 598.081 293.615 598.146 293.205 598.146C292.688 598.146 292.226 598.044 291.821 597.839C291.416 597.629 291.098 597.348 290.869 596.997C290.639 596.64 290.524 596.237 290.524 595.788C290.524 595.368 290.603 594.997 290.759 594.675C290.92 594.348 291.154 594.074 291.462 593.854C291.774 593.635 292.155 593.469 292.604 593.356C293.054 593.239 293.566 593.181 294.143 593.181H295.527ZM304.825 591.767V598H303.059V590.075H304.722L304.825 591.767ZM304.51 593.745L303.938 593.737C303.943 593.176 304.021 592.661 304.173 592.192C304.329 591.723 304.544 591.32 304.817 590.983C305.096 590.646 305.428 590.388 305.813 590.207C306.199 590.021 306.629 589.929 307.102 589.929C307.483 589.929 307.827 589.982 308.135 590.09C308.448 590.192 308.714 590.361 308.933 590.595C309.158 590.83 309.329 591.135 309.446 591.511C309.563 591.882 309.622 592.338 309.622 592.88V598H307.849V592.873C307.849 592.492 307.793 592.192 307.681 591.972C307.574 591.748 307.415 591.589 307.205 591.496C307 591.398 306.743 591.35 306.436 591.35C306.133 591.35 305.862 591.413 305.623 591.54C305.384 591.667 305.181 591.84 305.015 592.06C304.854 592.28 304.729 592.534 304.641 592.822C304.554 593.11 304.51 593.417 304.51 593.745ZM316.116 596.411V592.631C316.116 592.348 316.065 592.104 315.963 591.899C315.86 591.694 315.704 591.535 315.494 591.423C315.289 591.311 315.03 591.254 314.717 591.254C314.429 591.254 314.18 591.303 313.97 591.401C313.76 591.499 313.597 591.63 313.48 591.796C313.362 591.962 313.304 592.15 313.304 592.36H311.546C311.546 592.048 311.622 591.745 311.773 591.452C311.924 591.159 312.144 590.898 312.432 590.668C312.72 590.439 313.065 590.258 313.465 590.126C313.865 589.995 314.315 589.929 314.813 589.929C315.408 589.929 315.936 590.029 316.395 590.229C316.859 590.429 317.222 590.732 317.486 591.137C317.755 591.538 317.889 592.041 317.889 592.646V596.169C317.889 596.53 317.913 596.855 317.962 597.143C318.016 597.426 318.091 597.673 318.189 597.883V598H316.38C316.297 597.81 316.231 597.568 316.182 597.275C316.138 596.977 316.116 596.689 316.116 596.411ZM316.373 593.181L316.387 594.272H315.12C314.793 594.272 314.505 594.304 314.256 594.367C314.007 594.426 313.799 594.514 313.633 594.631C313.467 594.748 313.343 594.89 313.26 595.056C313.177 595.222 313.135 595.41 313.135 595.62C313.135 595.83 313.184 596.022 313.282 596.198C313.38 596.369 313.521 596.503 313.707 596.601C313.897 596.699 314.127 596.748 314.395 596.748C314.757 596.748 315.071 596.674 315.34 596.528C315.613 596.376 315.828 596.193 315.985 595.979C316.141 595.759 316.224 595.551 316.234 595.356L316.805 596.14C316.746 596.34 316.646 596.555 316.505 596.784C316.363 597.014 316.177 597.233 315.948 597.443C315.723 597.648 315.452 597.817 315.135 597.949C314.822 598.081 314.461 598.146 314.051 598.146C313.533 598.146 313.072 598.044 312.667 597.839C312.261 597.629 311.944 597.348 311.715 596.997C311.485 596.64 311.37 596.237 311.37 595.788C311.37 595.368 311.448 594.997 311.605 594.675C311.766 594.348 312 594.074 312.308 593.854C312.62 593.635 313.001 593.469 313.45 593.356C313.9 593.239 314.412 593.181 314.988 593.181H316.373ZM138.683 609.584V616H136.918V608.075H138.603L138.683 609.584ZM141.107 608.024L141.093 609.665C140.985 609.645 140.868 609.63 140.741 609.621C140.619 609.611 140.497 609.606 140.375 609.606C140.072 609.606 139.806 609.65 139.577 609.738C139.347 609.821 139.154 609.943 138.998 610.104C138.847 610.26 138.729 610.451 138.646 610.675C138.563 610.9 138.515 611.151 138.5 611.43L138.097 611.459C138.097 610.961 138.146 610.5 138.244 610.075C138.341 609.65 138.488 609.276 138.683 608.954C138.883 608.632 139.132 608.38 139.43 608.2C139.733 608.019 140.082 607.929 140.478 607.929C140.585 607.929 140.7 607.938 140.822 607.958C140.949 607.978 141.044 608 141.107 608.024ZM145.786 616.146C145.2 616.146 144.67 616.051 144.196 615.861C143.727 615.666 143.327 615.395 142.995 615.048C142.668 614.701 142.416 614.293 142.241 613.825C142.065 613.356 141.977 612.851 141.977 612.309V612.016C141.977 611.396 142.067 610.834 142.248 610.331C142.429 609.828 142.68 609.398 143.002 609.042C143.325 608.681 143.705 608.405 144.145 608.214C144.584 608.024 145.06 607.929 145.573 607.929C146.14 607.929 146.635 608.024 147.06 608.214C147.485 608.405 147.836 608.673 148.115 609.02C148.398 609.362 148.608 609.77 148.745 610.243C148.886 610.717 148.957 611.239 148.957 611.811V612.565H142.834V611.298H147.214V611.159C147.204 610.841 147.141 610.543 147.023 610.265C146.911 609.987 146.738 609.762 146.503 609.591C146.269 609.42 145.956 609.335 145.566 609.335C145.273 609.335 145.012 609.398 144.782 609.525C144.558 609.647 144.37 609.826 144.218 610.06C144.067 610.294 143.95 610.578 143.867 610.91C143.788 611.237 143.749 611.605 143.749 612.016V612.309C143.749 612.655 143.796 612.978 143.889 613.275C143.986 613.568 144.128 613.825 144.313 614.044C144.499 614.264 144.724 614.438 144.987 614.564C145.251 614.687 145.551 614.748 145.888 614.748C146.313 614.748 146.691 614.662 147.023 614.491C147.355 614.32 147.643 614.079 147.888 613.766L148.818 614.667C148.647 614.916 148.425 615.155 148.151 615.385C147.878 615.609 147.543 615.792 147.148 615.934C146.757 616.076 146.303 616.146 145.786 616.146ZM155.635 608.075H157.239V615.78C157.239 616.493 157.087 617.099 156.784 617.597C156.482 618.095 156.059 618.473 155.517 618.732C154.975 618.996 154.348 619.127 153.635 619.127C153.332 619.127 152.995 619.083 152.624 618.996C152.258 618.908 151.902 618.766 151.555 618.571C151.213 618.38 150.928 618.129 150.698 617.816L151.526 616.776C151.809 617.113 152.121 617.36 152.463 617.516C152.805 617.672 153.164 617.75 153.54 617.75C153.945 617.75 154.289 617.675 154.573 617.523C154.861 617.377 155.083 617.16 155.239 616.872C155.395 616.583 155.473 616.232 155.473 615.817V609.87L155.635 608.075ZM150.251 612.125V611.972C150.251 611.371 150.325 610.824 150.471 610.331C150.617 609.833 150.827 609.406 151.101 609.049C151.374 608.688 151.706 608.412 152.097 608.222C152.488 608.026 152.929 607.929 153.423 607.929C153.935 607.929 154.372 608.021 154.734 608.207C155.1 608.393 155.405 608.659 155.649 609.005C155.893 609.347 156.084 609.757 156.221 610.236C156.362 610.709 156.467 611.237 156.535 611.818V612.309C156.472 612.875 156.365 613.393 156.213 613.861C156.062 614.33 155.862 614.735 155.613 615.077C155.364 615.419 155.056 615.683 154.69 615.868C154.328 616.054 153.901 616.146 153.408 616.146C152.925 616.146 152.488 616.046 152.097 615.846C151.711 615.646 151.379 615.365 151.101 615.004C150.827 614.643 150.617 614.218 150.471 613.729C150.325 613.236 150.251 612.702 150.251 612.125ZM152.016 611.972V612.125C152.016 612.487 152.051 612.824 152.119 613.136C152.192 613.449 152.302 613.725 152.449 613.964C152.6 614.198 152.79 614.384 153.02 614.521C153.254 614.652 153.53 614.718 153.847 614.718C154.262 614.718 154.602 614.63 154.866 614.455C155.134 614.279 155.339 614.042 155.481 613.744C155.627 613.441 155.73 613.104 155.788 612.733V611.408C155.759 611.12 155.698 610.851 155.605 610.602C155.517 610.353 155.398 610.136 155.246 609.95C155.095 609.76 154.905 609.613 154.675 609.511C154.446 609.403 154.175 609.35 153.862 609.35C153.545 609.35 153.269 609.418 153.034 609.555C152.8 609.691 152.607 609.879 152.456 610.119C152.309 610.358 152.2 610.636 152.126 610.954C152.053 611.271 152.016 611.61 152.016 611.972ZM161.184 608.075V616H159.412V608.075H161.184ZM159.295 605.995C159.295 605.727 159.383 605.504 159.558 605.329C159.739 605.148 159.988 605.058 160.305 605.058C160.618 605.058 160.864 605.148 161.045 605.329C161.226 605.504 161.316 605.727 161.316 605.995C161.316 606.259 161.226 606.479 161.045 606.654C160.864 606.83 160.618 606.918 160.305 606.918C159.988 606.918 159.739 606.83 159.558 606.654C159.383 606.479 159.295 606.259 159.295 605.995ZM167.811 614.411V610.631C167.811 610.348 167.759 610.104 167.657 609.899C167.554 609.694 167.398 609.535 167.188 609.423C166.983 609.311 166.724 609.254 166.412 609.254C166.124 609.254 165.875 609.303 165.665 609.401C165.455 609.499 165.291 609.63 165.174 609.796C165.057 609.962 164.998 610.15 164.998 610.36H163.24C163.24 610.048 163.316 609.745 163.467 609.452C163.619 609.159 163.838 608.898 164.127 608.668C164.415 608.439 164.759 608.258 165.159 608.126C165.56 607.995 166.009 607.929 166.507 607.929C167.103 607.929 167.63 608.029 168.089 608.229C168.553 608.429 168.917 608.732 169.18 609.137C169.449 609.538 169.583 610.041 169.583 610.646V614.169C169.583 614.53 169.608 614.855 169.656 615.143C169.71 615.426 169.786 615.673 169.883 615.883V616H168.074C167.991 615.81 167.925 615.568 167.877 615.275C167.833 614.977 167.811 614.689 167.811 614.411ZM168.067 611.181L168.082 612.272H166.815C166.487 612.272 166.199 612.304 165.95 612.367C165.701 612.426 165.494 612.514 165.328 612.631C165.162 612.748 165.037 612.89 164.954 613.056C164.871 613.222 164.83 613.41 164.83 613.62C164.83 613.83 164.879 614.022 164.976 614.198C165.074 614.369 165.215 614.503 165.401 614.601C165.591 614.699 165.821 614.748 166.089 614.748C166.451 614.748 166.766 614.674 167.034 614.528C167.308 614.376 167.523 614.193 167.679 613.979C167.835 613.759 167.918 613.551 167.928 613.356L168.499 614.14C168.441 614.34 168.34 614.555 168.199 614.784C168.057 615.014 167.872 615.233 167.642 615.443C167.418 615.648 167.147 615.817 166.829 615.949C166.517 616.081 166.155 616.146 165.745 616.146C165.228 616.146 164.766 616.044 164.361 615.839C163.956 615.629 163.638 615.348 163.409 614.997C163.179 614.64 163.065 614.237 163.065 613.788C163.065 613.368 163.143 612.997 163.299 612.675C163.46 612.348 163.694 612.074 164.002 611.854C164.315 611.635 164.695 611.469 165.145 611.356C165.594 611.239 166.107 611.181 166.683 611.181H168.067ZM168.177 604.838L169.254 604.918C169.254 605.275 169.183 605.595 169.041 605.878C168.9 606.156 168.707 606.376 168.463 606.537C168.218 606.698 167.942 606.779 167.635 606.779C167.396 606.779 167.193 606.745 167.027 606.676C166.861 606.608 166.71 606.53 166.573 606.442C166.436 606.354 166.295 606.278 166.148 606.215C166.006 606.146 165.838 606.112 165.643 606.112C165.457 606.112 165.298 606.181 165.167 606.317C165.04 606.454 164.976 606.637 164.976 606.867L163.892 606.808C163.892 606.457 163.963 606.139 164.105 605.856C164.246 605.573 164.439 605.348 164.683 605.182C164.927 605.016 165.203 604.933 165.511 604.933C165.711 604.933 165.892 604.967 166.053 605.036C166.219 605.099 166.375 605.175 166.522 605.263C166.673 605.351 166.827 605.429 166.983 605.497C167.139 605.565 167.313 605.6 167.503 605.6C167.689 605.6 167.847 605.529 167.979 605.387C168.111 605.246 168.177 605.062 168.177 604.838ZM171.317 612.125V611.957C171.317 611.386 171.4 610.856 171.566 610.368C171.732 609.875 171.971 609.447 172.284 609.086C172.601 608.72 172.987 608.437 173.441 608.236C173.9 608.031 174.417 607.929 174.994 607.929C175.575 607.929 176.092 608.031 176.546 608.236C177.005 608.437 177.394 608.72 177.711 609.086C178.028 609.447 178.27 609.875 178.436 610.368C178.602 610.856 178.685 611.386 178.685 611.957V612.125C178.685 612.697 178.602 613.227 178.436 613.715C178.27 614.203 178.028 614.63 177.711 614.997C177.394 615.358 177.008 615.641 176.554 615.846C176.1 616.046 175.584 616.146 175.008 616.146C174.427 616.146 173.907 616.046 173.448 615.846C172.994 615.641 172.608 615.358 172.291 614.997C171.974 614.63 171.732 614.203 171.566 613.715C171.4 613.227 171.317 612.697 171.317 612.125ZM173.082 611.957V612.125C173.082 612.482 173.119 612.819 173.192 613.136C173.265 613.454 173.38 613.732 173.536 613.971C173.692 614.21 173.893 614.398 174.137 614.535C174.381 614.672 174.671 614.74 175.008 614.74C175.335 614.74 175.619 614.672 175.858 614.535C176.102 614.398 176.302 614.21 176.458 613.971C176.615 613.732 176.729 613.454 176.803 613.136C176.881 612.819 176.92 612.482 176.92 612.125V611.957C176.92 611.605 176.881 611.273 176.803 610.961C176.729 610.644 176.612 610.363 176.451 610.119C176.295 609.875 176.095 609.684 175.851 609.547C175.611 609.406 175.326 609.335 174.994 609.335C174.662 609.335 174.374 609.406 174.129 609.547C173.89 609.684 173.692 609.875 173.536 610.119C173.38 610.363 173.265 610.644 173.192 610.961C173.119 611.273 173.082 611.605 173.082 611.957ZM189.184 614.359V604.75H190.956V616H189.352L189.184 614.359ZM184.028 612.125V611.972C184.028 611.371 184.098 610.824 184.24 610.331C184.382 609.833 184.587 609.406 184.855 609.049C185.124 608.688 185.451 608.412 185.837 608.222C186.222 608.026 186.657 607.929 187.14 607.929C187.619 607.929 188.039 608.021 188.4 608.207C188.762 608.393 189.069 608.659 189.323 609.005C189.577 609.347 189.78 609.757 189.931 610.236C190.082 610.709 190.19 611.237 190.253 611.818V612.309C190.19 612.875 190.082 613.393 189.931 613.861C189.78 614.33 189.577 614.735 189.323 615.077C189.069 615.419 188.759 615.683 188.393 615.868C188.032 616.054 187.609 616.146 187.126 616.146C186.647 616.146 186.215 616.046 185.829 615.846C185.449 615.646 185.124 615.365 184.855 615.004C184.587 614.643 184.382 614.218 184.24 613.729C184.098 613.236 184.028 612.702 184.028 612.125ZM185.793 611.972V612.125C185.793 612.487 185.825 612.824 185.888 613.136C185.956 613.449 186.061 613.725 186.203 613.964C186.345 614.198 186.528 614.384 186.752 614.521C186.982 614.652 187.255 614.718 187.573 614.718C187.973 614.718 188.303 614.63 188.561 614.455C188.82 614.279 189.023 614.042 189.169 613.744C189.321 613.441 189.423 613.104 189.477 612.733V611.408C189.448 611.12 189.387 610.851 189.294 610.602C189.206 610.353 189.086 610.136 188.935 609.95C188.783 609.76 188.596 609.613 188.371 609.511C188.151 609.403 187.89 609.35 187.587 609.35C187.265 609.35 186.992 609.418 186.767 609.555C186.542 609.691 186.357 609.879 186.21 610.119C186.069 610.358 185.964 610.636 185.895 610.954C185.827 611.271 185.793 611.61 185.793 611.972ZM196.521 616.146C195.935 616.146 195.405 616.051 194.931 615.861C194.463 615.666 194.062 615.395 193.73 615.048C193.403 614.701 193.152 614.293 192.976 613.825C192.8 613.356 192.712 612.851 192.712 612.309V612.016C192.712 611.396 192.802 610.834 192.983 610.331C193.164 609.828 193.415 609.398 193.738 609.042C194.06 608.681 194.441 608.405 194.88 608.214C195.32 608.024 195.796 607.929 196.308 607.929C196.875 607.929 197.37 608.024 197.795 608.214C198.22 608.405 198.571 608.673 198.85 609.02C199.133 609.362 199.343 609.77 199.48 610.243C199.621 610.717 199.692 611.239 199.692 611.811V612.565H193.569V611.298H197.949V611.159C197.939 610.841 197.876 610.543 197.758 610.265C197.646 609.987 197.473 609.762 197.238 609.591C197.004 609.42 196.692 609.335 196.301 609.335C196.008 609.335 195.747 609.398 195.517 609.525C195.293 609.647 195.105 609.826 194.953 610.06C194.802 610.294 194.685 610.578 194.602 610.91C194.524 611.237 194.485 611.605 194.485 612.016V612.309C194.485 612.655 194.531 612.978 194.624 613.275C194.721 613.568 194.863 613.825 195.049 614.044C195.234 614.264 195.459 614.438 195.722 614.564C195.986 614.687 196.286 614.748 196.623 614.748C197.048 614.748 197.426 614.662 197.758 614.491C198.091 614.32 198.379 614.079 198.623 613.766L199.553 614.667C199.382 614.916 199.16 615.155 198.886 615.385C198.613 615.609 198.279 615.792 197.883 615.934C197.492 616.076 197.038 616.146 196.521 616.146ZM205.74 613.854C205.74 613.678 205.696 613.52 205.608 613.378C205.52 613.231 205.352 613.1 205.103 612.982C204.858 612.865 204.497 612.758 204.019 612.66C203.599 612.567 203.213 612.458 202.861 612.331C202.515 612.199 202.217 612.04 201.968 611.854C201.719 611.669 201.526 611.449 201.389 611.195C201.253 610.941 201.184 610.648 201.184 610.316C201.184 609.994 201.255 609.689 201.397 609.401C201.538 609.113 201.741 608.859 202.004 608.639C202.268 608.419 202.588 608.246 202.964 608.119C203.345 607.992 203.77 607.929 204.238 607.929C204.902 607.929 205.471 608.041 205.945 608.266C206.423 608.485 206.79 608.786 207.044 609.167C207.297 609.542 207.424 609.967 207.424 610.441H205.659C205.659 610.231 205.606 610.036 205.498 609.855C205.396 609.669 205.239 609.521 205.029 609.408C204.819 609.291 204.556 609.232 204.238 609.232C203.936 609.232 203.684 609.281 203.484 609.379C203.289 609.472 203.142 609.594 203.045 609.745C202.952 609.896 202.905 610.062 202.905 610.243C202.905 610.375 202.93 610.495 202.979 610.602C203.032 610.705 203.12 610.8 203.242 610.888C203.364 610.971 203.53 611.049 203.74 611.122C203.955 611.195 204.224 611.266 204.546 611.334C205.151 611.461 205.671 611.625 206.106 611.825C206.546 612.021 206.882 612.274 207.117 612.587C207.351 612.895 207.468 613.285 207.468 613.759C207.468 614.11 207.393 614.433 207.241 614.726C207.095 615.014 206.88 615.265 206.597 615.48C206.314 615.69 205.974 615.854 205.579 615.971C205.188 616.088 204.749 616.146 204.26 616.146C203.543 616.146 202.935 616.02 202.437 615.766C201.939 615.507 201.56 615.177 201.301 614.777C201.047 614.372 200.921 613.952 200.921 613.517H202.627C202.647 613.844 202.737 614.105 202.898 614.301C203.064 614.491 203.269 614.63 203.513 614.718C203.762 614.801 204.019 614.843 204.282 614.843C204.6 614.843 204.866 614.801 205.081 614.718C205.296 614.63 205.459 614.513 205.571 614.367C205.684 614.215 205.74 614.044 205.74 613.854ZM212.872 608.075V609.364H208.404V608.075H212.872ZM209.693 606.134H211.458V613.81C211.458 614.054 211.492 614.242 211.561 614.374C211.634 614.501 211.734 614.586 211.861 614.63C211.988 614.674 212.137 614.696 212.308 614.696C212.43 614.696 212.547 614.689 212.659 614.674C212.771 614.66 212.862 614.645 212.93 614.63L212.938 615.978C212.791 616.022 212.62 616.061 212.425 616.095C212.234 616.129 212.015 616.146 211.766 616.146C211.36 616.146 211.001 616.076 210.689 615.934C210.376 615.788 210.132 615.551 209.957 615.224C209.781 614.896 209.693 614.462 209.693 613.92V606.134ZM218.927 614.411V610.631C218.927 610.348 218.875 610.104 218.773 609.899C218.67 609.694 218.514 609.535 218.304 609.423C218.099 609.311 217.84 609.254 217.528 609.254C217.24 609.254 216.991 609.303 216.781 609.401C216.571 609.499 216.407 609.63 216.29 609.796C216.173 609.962 216.114 610.15 216.114 610.36H214.356C214.356 610.048 214.432 609.745 214.583 609.452C214.735 609.159 214.954 608.898 215.243 608.668C215.531 608.439 215.875 608.258 216.275 608.126C216.676 607.995 217.125 607.929 217.623 607.929C218.219 607.929 218.746 608.029 219.205 608.229C219.669 608.429 220.033 608.732 220.296 609.137C220.565 609.538 220.699 610.041 220.699 610.646V614.169C220.699 614.53 220.724 614.855 220.772 615.143C220.826 615.426 220.902 615.673 220.999 615.883V616H219.19C219.107 615.81 219.041 615.568 218.993 615.275C218.949 614.977 218.927 614.689 218.927 614.411ZM219.183 611.181L219.198 612.272H217.931C217.603 612.272 217.315 612.304 217.066 612.367C216.817 612.426 216.61 612.514 216.444 612.631C216.278 612.748 216.153 612.89 216.07 613.056C215.987 613.222 215.946 613.41 215.946 613.62C215.946 613.83 215.995 614.022 216.092 614.198C216.19 614.369 216.331 614.503 216.517 614.601C216.707 614.699 216.937 614.748 217.205 614.748C217.567 614.748 217.882 614.674 218.15 614.528C218.424 614.376 218.639 614.193 218.795 613.979C218.951 613.759 219.034 613.551 219.044 613.356L219.615 614.14C219.557 614.34 219.456 614.555 219.315 614.784C219.173 615.014 218.988 615.233 218.758 615.443C218.534 615.648 218.263 615.817 217.945 615.949C217.633 616.081 217.271 616.146 216.861 616.146C216.344 616.146 215.882 616.044 215.477 615.839C215.072 615.629 214.754 615.348 214.525 614.997C214.295 614.64 214.181 614.237 214.181 613.788C214.181 613.368 214.259 612.997 214.415 612.675C214.576 612.348 214.81 612.074 215.118 611.854C215.431 611.635 215.811 611.469 216.261 611.356C216.71 611.239 217.223 611.181 217.799 611.181H219.183ZM226.007 614.74C226.295 614.74 226.554 614.684 226.783 614.572C227.018 614.455 227.206 614.293 227.347 614.088C227.494 613.883 227.575 613.646 227.589 613.378H229.252C229.242 613.891 229.091 614.357 228.798 614.777C228.505 615.197 228.117 615.531 227.633 615.78C227.15 616.024 226.615 616.146 226.029 616.146C225.424 616.146 224.896 616.044 224.447 615.839C223.998 615.629 223.624 615.341 223.326 614.975C223.029 614.608 222.804 614.186 222.653 613.708C222.506 613.229 222.433 612.716 222.433 612.169V611.913C222.433 611.366 222.506 610.854 222.653 610.375C222.804 609.892 223.029 609.467 223.326 609.101C223.624 608.734 223.998 608.449 224.447 608.244C224.896 608.034 225.421 607.929 226.022 607.929C226.657 607.929 227.213 608.056 227.692 608.31C228.17 608.559 228.546 608.908 228.82 609.357C229.098 609.801 229.242 610.319 229.252 610.91H227.589C227.575 610.617 227.501 610.353 227.369 610.119C227.242 609.879 227.062 609.689 226.827 609.547C226.598 609.406 226.322 609.335 226 609.335C225.643 609.335 225.348 609.408 225.114 609.555C224.879 609.696 224.696 609.892 224.564 610.141C224.432 610.385 224.337 610.661 224.279 610.968C224.225 611.271 224.198 611.586 224.198 611.913V612.169C224.198 612.497 224.225 612.814 224.279 613.122C224.332 613.429 224.425 613.705 224.557 613.949C224.694 614.188 224.879 614.381 225.114 614.528C225.348 614.669 225.646 614.74 226.007 614.74ZM235.3 614.411V610.631C235.3 610.348 235.248 610.104 235.146 609.899C235.043 609.694 234.887 609.535 234.677 609.423C234.472 609.311 234.213 609.254 233.901 609.254C233.613 609.254 233.363 609.303 233.154 609.401C232.944 609.499 232.78 609.63 232.663 609.796C232.546 609.962 232.487 610.15 232.487 610.36H230.729C230.729 610.048 230.805 609.745 230.956 609.452C231.108 609.159 231.327 608.898 231.615 608.668C231.904 608.439 232.248 608.258 232.648 608.126C233.049 607.995 233.498 607.929 233.996 607.929C234.592 607.929 235.119 608.029 235.578 608.229C236.042 608.429 236.405 608.732 236.669 609.137C236.938 609.538 237.072 610.041 237.072 610.646V614.169C237.072 614.53 237.096 614.855 237.145 615.143C237.199 615.426 237.275 615.673 237.372 615.883V616H235.563C235.48 615.81 235.414 615.568 235.365 615.275C235.321 614.977 235.3 614.689 235.3 614.411ZM235.556 611.181L235.571 612.272H234.303C233.976 612.272 233.688 612.304 233.439 612.367C233.19 612.426 232.983 612.514 232.817 612.631C232.651 612.748 232.526 612.89 232.443 613.056C232.36 613.222 232.319 613.41 232.319 613.62C232.319 613.83 232.367 614.022 232.465 614.198C232.563 614.369 232.704 614.503 232.89 614.601C233.08 614.699 233.31 614.748 233.578 614.748C233.94 614.748 234.255 614.674 234.523 614.528C234.797 614.376 235.011 614.193 235.168 613.979C235.324 613.759 235.407 613.551 235.417 613.356L235.988 614.14C235.929 614.34 235.829 614.555 235.688 614.784C235.546 615.014 235.361 615.233 235.131 615.443C234.906 615.648 234.635 615.817 234.318 615.949C234.006 616.081 233.644 616.146 233.234 616.146C232.717 616.146 232.255 616.044 231.85 615.839C231.445 615.629 231.127 615.348 230.898 614.997C230.668 614.64 230.553 614.237 230.553 613.788C230.553 613.368 230.632 612.997 230.788 612.675C230.949 612.348 231.183 612.074 231.491 611.854C231.803 611.635 232.184 611.469 232.633 611.356C233.083 611.239 233.595 611.181 234.172 611.181H235.556ZM243.977 614.359V604.75H245.749V616H244.145L243.977 614.359ZM238.82 612.125V611.972C238.82 611.371 238.891 610.824 239.033 610.331C239.174 609.833 239.379 609.406 239.648 609.049C239.917 608.688 240.244 608.412 240.629 608.222C241.015 608.026 241.45 607.929 241.933 607.929C242.412 607.929 242.832 608.021 243.193 608.207C243.554 608.393 243.862 608.659 244.116 609.005C244.37 609.347 244.572 609.757 244.724 610.236C244.875 610.709 244.983 611.237 245.046 611.818V612.309C244.983 612.875 244.875 613.393 244.724 613.861C244.572 614.33 244.37 614.735 244.116 615.077C243.862 615.419 243.552 615.683 243.186 615.868C242.824 616.054 242.402 616.146 241.919 616.146C241.44 616.146 241.008 616.046 240.622 615.846C240.241 615.646 239.917 615.365 239.648 615.004C239.379 614.643 239.174 614.218 239.033 613.729C238.891 613.236 238.82 612.702 238.82 612.125ZM240.586 611.972V612.125C240.586 612.487 240.617 612.824 240.681 613.136C240.749 613.449 240.854 613.725 240.996 613.964C241.137 614.198 241.32 614.384 241.545 614.521C241.775 614.652 242.048 614.718 242.365 614.718C242.766 614.718 243.095 614.63 243.354 614.455C243.613 614.279 243.816 614.042 243.962 613.744C244.113 613.441 244.216 613.104 244.27 612.733V611.408C244.24 611.12 244.179 610.851 244.087 610.602C243.999 610.353 243.879 610.136 243.728 609.95C243.576 609.76 243.388 609.613 243.164 609.511C242.944 609.403 242.683 609.35 242.38 609.35C242.058 609.35 241.784 609.418 241.56 609.555C241.335 609.691 241.15 609.879 241.003 610.119C240.861 610.358 240.756 610.636 240.688 610.954C240.62 611.271 240.586 611.61 240.586 611.972ZM252.288 614.411V610.631C252.288 610.348 252.236 610.104 252.134 609.899C252.031 609.694 251.875 609.535 251.665 609.423C251.46 609.311 251.201 609.254 250.889 609.254C250.601 609.254 250.352 609.303 250.142 609.401C249.932 609.499 249.768 609.63 249.651 609.796C249.534 609.962 249.475 610.15 249.475 610.36H247.717C247.717 610.048 247.793 609.745 247.944 609.452C248.096 609.159 248.315 608.898 248.604 608.668C248.892 608.439 249.236 608.258 249.636 608.126C250.037 607.995 250.486 607.929 250.984 607.929C251.58 607.929 252.107 608.029 252.566 608.229C253.03 608.429 253.394 608.732 253.657 609.137C253.926 609.538 254.06 610.041 254.06 610.646V614.169C254.06 614.53 254.084 614.855 254.133 615.143C254.187 615.426 254.263 615.673 254.36 615.883V616H252.551C252.468 615.81 252.402 615.568 252.354 615.275C252.31 614.977 252.288 614.689 252.288 614.411ZM252.544 611.181L252.559 612.272H251.292C250.964 612.272 250.676 612.304 250.427 612.367C250.178 612.426 249.971 612.514 249.805 612.631C249.639 612.748 249.514 612.89 249.431 613.056C249.348 613.222 249.307 613.41 249.307 613.62C249.307 613.83 249.355 614.022 249.453 614.198C249.551 614.369 249.692 614.503 249.878 614.601C250.068 614.699 250.298 614.748 250.566 614.748C250.928 614.748 251.243 614.674 251.511 614.528C251.785 614.376 252 614.193 252.156 613.979C252.312 613.759 252.395 613.551 252.405 613.356L252.976 614.14C252.917 614.34 252.817 614.555 252.676 614.784C252.534 615.014 252.349 615.233 252.119 615.443C251.895 615.648 251.624 615.817 251.306 615.949C250.994 616.081 250.632 616.146 250.222 616.146C249.705 616.146 249.243 616.044 248.838 615.839C248.433 615.629 248.115 615.348 247.886 614.997C247.656 614.64 247.542 614.237 247.542 613.788C247.542 613.368 247.62 612.997 247.776 612.675C247.937 612.348 248.171 612.074 248.479 611.854C248.792 611.635 249.172 611.469 249.622 611.356C250.071 611.239 250.583 611.181 251.16 611.181H252.544Z" fill="white"/>
    </Svg>
  );

  useEffect(() => {
    if (permission?.granted) {
      // Validao de permisses
    }
  }, [permission]);

  if (!permission) {
    return <View />;
  }

  if (!permission.granted) {
    return (
      <View style={styles.container}>
        <TouchableOpacity
          style={styles.button}
          onPress={() => {
            requestPermission();
          }}
        >
          <MaterialCommunityIcons name="alert" size={24} color="white" />
        </TouchableOpacity>
      </View>
    );
  }

  async function takePicture() {
    if (cameraRef.current) {
      try {
        const photo = await cameraRef.current.takePictureAsync();
        setImage(photo.uri); // Define a URI da foto capturada
      } catch (error) {
        console.log('Erro ao tirar foto:', error);
      }
    }
  }

  const pickImage = async () => {
    let result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ['images'],
      allowsEditing: false,
      quality: 1,
    });

    if (!result.canceled) {
      setImage(result.assets[0].uri); // Define a URI da imagem selecionada
    }
  };

  async function handleUsePhoto() {
  const url = "http://192.168.0.2:3000/api/files/upload";
    
  if (!image) {
    Alert.alert('Erro', 'Nenhuma imagem para enviar.');
    return;
  }

  const formData = new FormData();
  formData.append('image', {
    uri: image,
    name: 'photo.jpg', // Nome do arquivo
    type: 'image/jpeg' // Tipo MIME do arquivo
  });

  try {
    const response = await axios.post(url, formData, {
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    });
    Alert.alert('Sucesso', 'Imagem enviada com sucesso!');
    console.log('Resposta do servidor:', response.data);
  } catch (error) {
    console.error('Erro ao enviar a imagem:', error);
    Alert.alert('Erro', 'Falha ao enviar a imagem.');
  }
  setImage(null); // Reseta a visualizao para voltar  cmera
}

  return (
    <View style={styles.container}>
      {image ? (
        // Exibir apenas os botes "Descartar" e "Usar essa foto" ao capturar ou selecionar uma imagem
        <>
          <Image source={{ uri: image }} style={styles.capturedImage} />
          <View style={styles.saveControls}>
            <TouchableOpacity onPress={() => setImage(null)} style={styles.textButton}>
              <Text style={styles.textButtonText}>Descartar</Text>
            </TouchableOpacity>
            <TouchableOpacity onPress={handleUsePhoto} style={styles.textButton}>
              <Text style={styles.textButtonText}>Usar essa foto</Text>
            </TouchableOpacity>
          </View>
        </>
      ) : (
        // Exibir os botes da cmera quando nenhuma imagem est sendo exibida
        <>
          <CameraView style={styles.camera} facing={cameraProps.facing} ref={cameraRef} />
          <View style={styles.templateOverlay}>
            <Template style={styles.template}/>
          </View>
          <View style={styles.bottomControls}>
            <TouchableOpacity onPress={pickImage} style={[styles.iconButton, styles.greenButton]}>
              <MaterialCommunityIcons name="image" size={30} color="white" />
            </TouchableOpacity>
            <TouchableOpacity onPress={takePicture} style={styles.captureButton} />
            <TouchableOpacity
              onPress={() =>
                setCameraProps((current) => ({
                  ...current,
                  facing: current.facing === 'back' ? 'front' : 'back',
                }))
              }
              style={[styles.iconButton, styles.greenButton]}
            >
              <MaterialCommunityIcons name="camera-flip" size={30} color="white" />
            </TouchableOpacity>
          </View>
        </>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000',
  },
  camera: {
    flex: 1,
    width: '100%',
  },
  capturedImage: {
    flex: 1,
    width: '100%',
  },
  bottomControls: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-evenly',
    position: 'absolute',
    bottom: 50,
    width: '100%',
    paddingHorizontal: 20,
  },
  captureButton: {
    width: 90,
    height: 90,
    borderRadius: 45,
    backgroundColor: 'white',
    borderWidth: 5,
    borderColor: '#ccc',
    marginHorizontal: -30,
  },
  iconButton: {
    padding: 10,
    borderRadius: 5,
  },
  greenButton: {
    backgroundColor: '#057B44',
  },
  saveControls: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    alignItems: 'center',
    position: 'absolute',
    bottom: 150,
    width: '100%',
  },
  textButton: {
    padding: 10,
    backgroundColor: '#057B44',
    borderRadius: 5,
    marginHorizontal: 20,
  },
  textButtonText: {
    color: 'white',
    fontSize: 18,
    fontWeight: 'bold',
    textAlign: 'center',
  },
  templateOverlay: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    justifyContent: 'center',
    alignItems: 'center',
  },
  template: {
    width: '100%',
    height: '100%',
  },
});
